Используя docker поднимите инстанс PostgreSQL (версию 13). Данные БД сохраните в volume.

Подключитесь к БД PostgreSQL используя psql.

Воспользуйтесь командой \? для вывода подсказки по имеющимся в psql управляющим командам.

Найдите и приведите управляющие команды для:

вывода списка БД

подключения к БД

вывода списка таблиц

вывода описания содержимого таблиц

выхода из psql



- вывода списка БД - psql -l, --list  

- подключения к БД - psql -d, --dbname=DBNAME (переход между базами \c dbname=user)

- вывода списка таблиц - \dt

- вывода описания содержимого таблиц - \dt[S+]  (\dt+)

- выхода из psql - \q


Задача 2

Используя psql создайте БД test_database.

Изучите бэкап БД.

Восстановите бэкап БД в test_database.

![alt tag](https://github.com/avo1yanskiy/devops-netology/blob/main/virt-homeworks/6.4/Screenshot_7.png " restory")


Перейдите в управляющую консоль psql внутри контейнера.


Подключитесь к восстановленной БД и проведите операцию ANALYZE для сбора статистики по таблице.

направильно ли я понимаю и сделал , проаанлизировал таблицу "orders"

test_database=# ANALYZE orders;
ANALYZE



Используя таблицу pg_stats, найдите столбец таблицы orders с наибольшим средним значением размера элементов в байтах.


Приведите в ответе команду, которую вы использовали для вычисления и полученный результат.

select avg_width from pg_stats;

![alt tag](https://github.com/avo1yanskiy/devops-netology/blob/main/virt-homeworks/6.4/Screenshot_40.png " avg_width")


Задача 3

Архитектор и администратор БД выяснили, что ваша таблица orders разрослась до невиданных размеров и поиск по ней занимает долгое время. Вам, как успешному выпускнику курсов DevOps в нетологии предложили провести разбиение таблицы на 2 (шардировать на orders_1 - price>499 и orders_2 - price<=499).

Предложите SQL-транзакцию для проведения данной операции.

Можно ли было изначально исключить "ручное" разбиение при проектировании таблицы orders?

Задача 4

Используя утилиту pg_dump создайте бекап БД test_database.

Как бы вы доработали бэкап-файл, чтобы добавить уникальность значения столбца title для таблиц test_database?

